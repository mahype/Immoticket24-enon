{"version":3,"file":"/reseller.js","mappings":"4OAAA,IAAIA,GAAS,EAab,SAASC,IACL,IAAMC,EAAUC,SAASC,uBAAuB,gCAGhD,GAFAC,QAAQC,IAAI,sBAEW,IAAnBJ,EAAQK,OAIR,OAHAF,QAAQC,IAAI,gCACZD,QAAQC,IAAI,mEACZD,QAAQC,IAAI,2IAIhBD,QAAQC,IAAI,yBACZ,IAAME,EAAkBC,OAAOC,SAASC,OAClCC,EAAgB,IAAIC,gBAAgBL,GAEpCM,EAAkBF,EAAcG,IAAI,gBACpCC,EAAkBJ,EAAcG,IAAI,gBACpCE,EAAWL,EAAcG,IAAI,QAEnC,GAAwB,OAApBC,EAAJ,CAKAX,QAAQC,IAAI,4BACZD,QAAQC,IAAI,mBAAqBQ,GACjCT,QAAQC,IAAI,mBAAqBU,GACjCX,QAAQC,IAAI,WAAaW,GAEzB,IAAMC,EAAU,6CAA+CD,EAAW,kBAAoBH,EAAkB,iBAAmBE,EAC7HG,EAAahB,SAASiB,eAAe,gCAE3C,GAAmB,OAAfD,EAOA,OANAd,QAAQC,IAAI,eAAiBY,GAC7Bb,QAAQC,IAAI,mBAAqBQ,GACjCT,QAAQC,IAAI,mBAAqBU,GACjCX,QAAQC,IAAI,WAAaW,GACzBZ,QAAQC,IAAI,WAAWa,QACvBA,EAAWE,IAAMH,GAIrB,IAAK,IAAII,EAAI,EAAGA,EAAIpB,EAAQK,OAAQe,IACtB,IAANA,GACApB,EAAQoB,GAAGD,IAAMH,EAEjBb,QAAQC,IAAI,eAAiBY,GAC7Bb,QAAQC,IAAI,mBAAqBQ,GACjCT,QAAQC,IAAI,mBAAqBU,GACjCX,QAAQC,IAAI,WAAaW,GACzBZ,QAAQC,IAAI,WAAWJ,EAAQoB,KAE/BpB,EAAQoB,GAAGC,MAAMC,QAAU,OAInCxB,GAAS,CAlCT,MAFIK,QAAQC,IAAI,yCAqCpB,CAnEAH,SAASsB,iBAAiB,oBAAoB,WACtCzB,GACJC,GACJ,IAGKD,GACDC,IA8DJQ,OAAOgB,iBAAiB,WAAW,SAASC,GACxC,GAAsB,8BAAjBA,EAAMC,QACiB,WAAvBC,EAAOF,EAAMG,MAAlB,CAEA,IAAMrB,EAAkBC,OAAOC,SAASC,OAClCC,EAAgB,IAAIC,gBAAgBL,GAEpCQ,GADkBJ,EAAcG,IAAI,gBAClBH,EAAcG,IAAI,iBAEtCc,EAAOC,KAAKC,MAAML,EAAMG,MAE5B,QAAyBG,IAAtBH,EAAKI,aAA4B,CAChC,IAAIC,EAAS/B,SAASiB,eAAe,gCACjClB,EAAU,GAEC,OAAXgC,EACAhC,EAAQiC,KAAKD,GAEbhC,EAAUC,SAASC,uBAAuB,gCAG9C,IAAI,IAAIkB,EAAI,EAAGA,EAAIpB,EAAQK,OAAQe,IAC3BpB,EAAQoB,GAAGc,gBAAkBV,EAAMW,SACnCnC,EAAQoB,GAAGC,MAAMe,OAAST,EAAKI,aAAe,KAC9C/B,EAAQoB,GAAGC,MAAMgB,SAAW,UAIZ,OAApBvB,GACAb,SAASC,uBAAuB,gCAAgC,GAAGoC,gBAE3E,MAEuBR,IAApBH,EAAKY,YACJtC,SAASC,uBAAuB,gCAAgC,GAAGoC,sBAG9CR,IAAtBH,EAAKa,eACJvC,SAASO,SAASiC,KAAOd,EAAKa,aApCW,CAsCjD,IAAG,E","sources":["webpack://enon/./public/scripts/src/reseller.js"],"sourcesContent":["let urlSet = false;\n\n// Check if the DOM is already loaded\ndocument.addEventListener(\"DOMContentLoaded\", function() {\n    if( urlSet ) return;\n    setUrl();\n});\n\n// Maybe the DOM is already loaded, then check if the URL is already set and set it if not\nif(! urlSet ) {\n    setUrl();\n} \n\nfunction setUrl() {\n    const iframes = document.getElementsByClassName(\"iframe-energieausweis-online\");\n    console.log(\"energieausweis.de:\");   \n\n    if( iframes.length === 0 ) {         \n        console.log(\"No iframes found. Exiting...\");\n        console.log(\"Make sure that the iframe is available and already loaded.\")\n        console.log(\"If frame is blocked by a cookie blocker on loading, please be sure to execute the setUrl() function after the DOM is loaded completely.\");\n        return;\n    }\n\n    console.log(\"Setting iframe URL...\");    \n    const enonQueryString = window.location.search;\n    const enonUrlParams = new URLSearchParams(enonQueryString);\n\n    const enonIframeToken = enonUrlParams.get(\"iframe_token\");\n    const enonAccessToken = enonUrlParams.get(\"access_token\");\n    const enonSlug = enonUrlParams.get(\"slug\");\n\n    if( enonAccessToken === null ) {\n        console.log(\"No iframe parameters found. Exiting...\");        \n        return;\n    } \n\n    console.log(\"Iframe parameters found.\");\n    console.log(\"- Iframe token: \" + enonIframeToken);\n    console.log(\"- Access token: \" + enonAccessToken);\n    console.log(\"- Slug: \" + enonSlug);\n\n    const enonUrl = \"https://energieausweis.de/energieausweise/\" + enonSlug + \"/?iframe_token=\" + enonIframeToken + \"&access_token=\" + enonAccessToken;\n    const enonIframe = document.getElementById(\"iframe-energieausweis-online\");\n\n    if( enonIframe !== null ) {\n        console.log(\"URL set to: \" + enonUrl);\n        console.log(\"- Iframe token: \" + enonIframeToken);\n        console.log(\"- Access token: \" + enonAccessToken);\n        console.log(\"- Slug: \" + enonSlug);\n        console.log(\"- Iframe\",enonIframe); \n        enonIframe.src = enonUrl;\n        return;\n    }\n\n    for (let i = 0; i < iframes.length; i++) {\n        if( i === 0 ){\n            iframes[i].src = enonUrl;\n\n            console.log(\"URL set to: \" + enonUrl);\n            console.log(\"- Iframe token: \" + enonIframeToken);\n            console.log(\"- Access token: \" + enonAccessToken);\n            console.log(\"- Slug: \" + enonSlug);\n            console.log(\"- Iframe\",iframes[i]);            \n        } else {\n            iframes[i].style.display = \"none\";\n        }\n    }     \n    \n    urlSet = true;\n}\n\nwindow.addEventListener(\"message\", function(event) {\n    if ( event.origin !== \"https://energieausweis.de\" ) return;\n    if ( typeof event.data  === 'object' ) return;\n\n    const enonQueryString = window.location.search;\n    const enonUrlParams = new URLSearchParams(enonQueryString);\n    const enonIframeToken = enonUrlParams.get(\"iframe_token\");\n    const enonAccessToken = enonUrlParams.get(\"access_token\");\n    \n    var data = JSON.parse(event.data);\n\n    if(data.frame_height !== undefined) {\n        let iframe = document.getElementById(\"iframe-energieausweis-online\");\n        let iframes = [];\n\n        if( iframe !== null ) {\n            iframes.push(iframe);\n        } else {\n            iframes = document.getElementsByClassName(\"iframe-energieausweis-online\");\n        }\n\n        for(let i = 0; i < iframes.length; i++) {\n            if( iframes[i].contentWindow === event.source) {\n                iframes[i].style.height = data.frame_height + \"px\";\n                iframes[i].style.overflow = \"hidden\";\n            }\n        }\n\n        if( enonAccessToken !== null ) {\n            document.getElementsByClassName(\"iframe-energieausweis-online\")[0].scrollIntoView();\n        }        \n    }\n\n    if(data.set_to_top !== undefined) {\n        document.getElementsByClassName(\"iframe-energieausweis-online\")[0].scrollIntoView();\n    }\n    \n    if(data.redirect_url !== undefined) {\n        document.location.href = data.redirect_url;\n    }\n}, false) ;"],"names":["urlSet","setUrl","iframes","document","getElementsByClassName","console","log","length","enonQueryString","window","location","search","enonUrlParams","URLSearchParams","enonIframeToken","get","enonAccessToken","enonSlug","enonUrl","enonIframe","getElementById","src","i","style","display","addEventListener","event","origin","_typeof","data","JSON","parse","undefined","frame_height","iframe","push","contentWindow","source","height","overflow","scrollIntoView","set_to_top","redirect_url","href"],"sourceRoot":""}