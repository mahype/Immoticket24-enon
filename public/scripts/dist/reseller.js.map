{"version":3,"file":"/reseller.js","mappings":"4OAAA,IAAIA,GAAS,EAab,SAASC,IACLC,QAAQC,IAAI,yBACZ,IAAMC,EAAkBC,OAAOC,SAASC,OAClCC,EAAgB,IAAIC,gBAAgBL,GAEpCM,EAAkBF,EAAcG,IAAI,gBACpCC,EAAkBJ,EAAcG,IAAI,gBACpCE,EAAWL,EAAcG,IAAI,QAEnC,GAAwB,OAApBC,EAKA,OAJAV,QAAQC,IAAI,qCACZD,QAAQC,IAAI,mBAAqBO,GACjCR,QAAQC,IAAI,mBAAqBS,QACjCV,QAAQC,IAAI,WAAaU,GAI7B,IAAMC,EAAU,6CAA+CD,EAAW,kBAAoBH,EAAkB,iBAAmBE,EAC7HG,EAAaC,SAASC,eAAe,gCAE3C,GAAmB,OAAfF,EAAJ,CAMA,IADA,IAAMG,EAAUF,SAASG,uBAAuB,gCACvCC,EAAI,EAAGA,EAAIF,EAAQG,OAAQD,IACtB,IAANA,GACAF,EAAQE,GAAGE,IAAMR,EAEjBZ,QAAQC,IAAI,eAAiBW,GAC7BZ,QAAQC,IAAI,mBAAqBO,GACjCR,QAAQC,IAAI,mBAAqBS,GACjCV,QAAQC,IAAI,WAAaU,GACzBX,QAAQqB,IAAI,WAAWL,EAAQE,KAE/BF,EAAQE,GAAGI,MAAMC,QAAU,OAInCzB,GAAS,CAjBT,MAFIe,EAAWO,IAAMR,CAoBzB,CAnDAE,SAASU,iBAAiB,oBAAoB,WACtC1B,GACJC,GACJ,IAGKD,GACDC,IA8CJI,OAAOqB,iBAAiB,WAAW,SAASC,GACxC,GAAsB,8BAAjBA,EAAMC,QACiB,WAAvBC,EAAOF,EAAMG,MAAlB,CAEA,IAAM1B,EAAkBC,OAAOC,SAASC,OAClCC,EAAgB,IAAIC,gBAAgBL,GAEpCQ,GADkBJ,EAAcG,IAAI,gBAClBH,EAAcG,IAAI,iBAEtCmB,EAAOC,KAAKC,MAAML,EAAMG,MAE5B,QAAyBG,IAAtBH,EAAKI,aAA4B,CAChC,IAAIC,EAASnB,SAASC,eAAe,gCACjCC,EAAU,GAEC,OAAXiB,EACAjB,EAAQkB,KAAKD,GAEbjB,EAAUF,SAASG,uBAAuB,gCAG9C,IAAI,IAAIC,EAAI,EAAGA,EAAIF,EAAQG,OAAQD,IAC3BF,EAAQE,GAAGiB,gBAAkBV,EAAMW,SACnCpB,EAAQE,GAAGI,MAAMe,OAAST,EAAKI,aAAe,KAC9ChB,EAAQE,GAAGI,MAAMgB,SAAW,UAIZ,OAApB5B,GACAI,SAASG,uBAAuB,gCAAgC,GAAGsB,gBAE3E,MAEuBR,IAApBH,EAAKY,YACJ1B,SAASG,uBAAuB,gCAAgC,GAAGsB,sBAG9CR,IAAtBH,EAAKa,eACJ3B,SAASV,SAASsC,KAAOd,EAAKa,aApCW,CAsCjD,IAAG,E","sources":["webpack://enon/./public/scripts/src/reseller.js"],"sourcesContent":["let urlSet = false;\n\n// Check if the DOM is already loaded\ndocument.addEventListener(\"DOMContentLoaded\", function() {\n    if( urlSet ) return;\n    setUrl();\n});\n\n// Maybe the DOM is already loaded, then check if the URL is already set and set it if not\nif(! urlSet ) {\n    setUrl();\n} \n\nfunction setUrl() {\n    console.log(\"Setting iframe URL...\");    \n    const enonQueryString = window.location.search;\n    const enonUrlParams = new URLSearchParams(enonQueryString);\n\n    const enonIframeToken = enonUrlParams.get(\"iframe_token\");\n    const enonAccessToken = enonUrlParams.get(\"access_token\");\n    const enonSlug = enonUrlParams.get(\"slug\");\n\n    if( enonAccessToken === null ) {\n        console.log(\"No access token found. Exiting...\");\n        console.log(\"- Iframe token: \" + enonIframeToken);\n        console.log(\"- Access token: \" + enonAccessToken);\n        console.log(\"- Slug: \" + enonSlug);\n        return;\n    }\n\n    const enonUrl = \"https://energieausweis.de/energieausweise/\" + enonSlug + \"/?iframe_token=\" + enonIframeToken + \"&access_token=\" + enonAccessToken;\n    const enonIframe = document.getElementById(\"iframe-energieausweis-online\");\n\n    if( enonIframe !== null ) {\n        enonIframe.src = enonUrl;\n        return;\n    }\n\n    const iframes = document.getElementsByClassName(\"iframe-energieausweis-online\");\n    for (let i = 0; i < iframes.length; i++) {\n        if( i === 0 ){\n            iframes[i].src = enonUrl;\n\n            console.log(\"URL set to: \" + enonUrl);\n            console.log(\"- Iframe token: \" + enonIframeToken);\n            console.log(\"- Access token: \" + enonAccessToken);\n            console.log(\"- Slug: \" + enonSlug);\n            console.l9g(\"- Iframe\",iframes[i]);\n        } else {\n            iframes[i].style.display = \"none\";\n        }\n    }     \n    \n    urlSet = true;\n}\n\nwindow.addEventListener(\"message\", function(event) {\n    if ( event.origin !== \"https://energieausweis.de\" ) return;\n    if ( typeof event.data  === 'object' ) return;\n\n    const enonQueryString = window.location.search;\n    const enonUrlParams = new URLSearchParams(enonQueryString);\n    const enonIframeToken = enonUrlParams.get(\"iframe_token\");\n    const enonAccessToken = enonUrlParams.get(\"access_token\");\n    \n    var data = JSON.parse(event.data);\n\n    if(data.frame_height !== undefined) {\n        let iframe = document.getElementById(\"iframe-energieausweis-online\");\n        let iframes = [];\n\n        if( iframe !== null ) {\n            iframes.push(iframe);\n        } else {\n            iframes = document.getElementsByClassName(\"iframe-energieausweis-online\");\n        }\n\n        for(let i = 0; i < iframes.length; i++) {\n            if( iframes[i].contentWindow === event.source) {\n                iframes[i].style.height = data.frame_height + \"px\";\n                iframes[i].style.overflow = \"hidden\";\n            }\n        }\n\n        if( enonAccessToken !== null ) {\n            document.getElementsByClassName(\"iframe-energieausweis-online\")[0].scrollIntoView();\n        }        \n    }\n\n    if(data.set_to_top !== undefined) {\n        document.getElementsByClassName(\"iframe-energieausweis-online\")[0].scrollIntoView();\n    }\n    \n    if(data.redirect_url !== undefined) {\n        document.location.href = data.redirect_url;\n    }\n}, false) ;"],"names":["urlSet","setUrl","console","log","enonQueryString","window","location","search","enonUrlParams","URLSearchParams","enonIframeToken","get","enonAccessToken","enonSlug","enonUrl","enonIframe","document","getElementById","iframes","getElementsByClassName","i","length","src","l9g","style","display","addEventListener","event","origin","_typeof","data","JSON","parse","undefined","frame_height","iframe","push","contentWindow","source","height","overflow","scrollIntoView","set_to_top","redirect_url","href"],"sourceRoot":""}