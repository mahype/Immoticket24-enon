{"version":3,"file":"/reseller.js","mappings":"4OAaA,SAASA,IACL,IAAMC,EAAkBC,OAAOC,SAASC,OAClCC,EAAgB,IAAIC,gBAAgBL,GAEpCM,EAAkBF,EAAcG,IAAI,gBACpCC,EAAkBJ,EAAcG,IAAI,gBACpCE,EAAWL,EAAcG,IAAI,QAEnC,GAAwB,OAApBC,EAA2B,CAC3B,IAAME,EAAU,6CAA+CD,EAAW,kBAAoBH,EAAkB,iBAAmBE,EAC7HG,EAAaC,SAASC,eAAe,gCAE3C,GAAmB,OAAfF,EAEA,YADAA,EAAWG,IAAMJ,GAKrB,IADA,IAAMK,EAAUH,SAASI,uBAAuB,gCACvCC,EAAI,EAAGA,EAAIF,EAAQG,OAAQD,IACtB,IAANA,EACAF,EAAQE,GAAGH,IAAMJ,EAEjBK,EAAQE,GAAGE,MAAMC,QAAU,MAIvC,CACJ,CArCAR,SAASS,iBAAiB,oBAAoB,WAE1CtB,GACJ,IAIIA,IAgCJE,OAAOoB,iBAAiB,WAAW,SAASC,GACxC,GAAsB,8BAAjBA,EAAMC,QACiB,WAAvBC,EAAOF,EAAMG,MAAlB,CAEA,IAAMzB,EAAkBC,OAAOC,SAASC,OAClCC,EAAgB,IAAIC,gBAAgBL,GAEpCQ,GADkBJ,EAAcG,IAAI,gBAClBH,EAAcG,IAAI,iBAEtCkB,EAAOC,KAAKC,MAAML,EAAMG,MAE5B,QAAyBG,IAAtBH,EAAKI,aAA4B,CAChC,IAAIC,EAASlB,SAASC,eAAe,gCACjCE,EAAU,GAEC,OAAXe,EACAf,EAAQgB,KAAKD,GAEbf,EAAUH,SAASI,uBAAuB,gCAG9C,IAAI,IAAIC,EAAI,EAAGA,EAAIF,EAAQG,OAAQD,IAC3BF,EAAQE,GAAGe,gBAAkBV,EAAMW,SACnClB,EAAQE,GAAGE,MAAMe,OAAST,EAAKI,aAAe,KAC9Cd,EAAQE,GAAGE,MAAMgB,SAAW,UAIZ,OAApB3B,GACAI,SAASI,uBAAuB,gCAAgC,GAAGoB,gBAE3E,MAEuBR,IAApBH,EAAKY,YACJzB,SAASI,uBAAuB,gCAAgC,GAAGoB,sBAG9CR,IAAtBH,EAAKa,eACJ1B,SAASV,SAASqC,KAAOd,EAAKa,aApCW,CAsCjD,IAAG,E","sources":["webpack://enon/./public/scripts/src/reseller.js"],"sourcesContent":["let urlSet = false;\n\n// Check if the DOM is already loaded\ndocument.addEventListener(\"DOMContentLoaded\", function() {\n    if( urlSet ) return;\n    setUrl();\n});\n\n// Maybe the DOM is already loaded, then check if the URL is already set and set it if not\nif(! urlSet ) {\n    setUrl();\n} \n\nfunction setUrl() {\n    const enonQueryString = window.location.search;\n    const enonUrlParams = new URLSearchParams(enonQueryString);\n\n    const enonIframeToken = enonUrlParams.get(\"iframe_token\");\n    const enonAccessToken = enonUrlParams.get(\"access_token\");\n    const enonSlug = enonUrlParams.get(\"slug\");\n\n    if( enonAccessToken !== null ) {\n        const enonUrl = \"https://energieausweis.de/energieausweise/\" + enonSlug + \"/?iframe_token=\" + enonIframeToken + \"&access_token=\" + enonAccessToken;\n        const enonIframe = document.getElementById(\"iframe-energieausweis-online\");\n\n        if( enonIframe !== null ) {\n            enonIframe.src = enonUrl;\n            return;\n        }\n\n        const iframes = document.getElementsByClassName(\"iframe-energieausweis-online\");\n        for (let i = 0; i < iframes.length; i++) {\n            if( i === 0 ){\n                iframes[i].src = enonUrl;\n            } else {\n                iframes[i].style.display = \"none\";\n            }\n        }     \n    \n    }\n}\n\nwindow.addEventListener(\"message\", function(event) {\n    if ( event.origin !== \"https://energieausweis.de\" ) return;\n    if ( typeof event.data  === 'object' ) return;\n\n    const enonQueryString = window.location.search;\n    const enonUrlParams = new URLSearchParams(enonQueryString);\n    const enonIframeToken = enonUrlParams.get(\"iframe_token\");\n    const enonAccessToken = enonUrlParams.get(\"access_token\");\n    \n    var data = JSON.parse(event.data);\n\n    if(data.frame_height !== undefined) {\n        let iframe = document.getElementById(\"iframe-energieausweis-online\");\n        let iframes = [];\n\n        if( iframe !== null ) {\n            iframes.push(iframe);\n        } else {\n            iframes = document.getElementsByClassName(\"iframe-energieausweis-online\");\n        }\n\n        for(let i = 0; i < iframes.length; i++) {\n            if( iframes[i].contentWindow === event.source) {\n                iframes[i].style.height = data.frame_height + \"px\";\n                iframes[i].style.overflow = \"hidden\";\n            }\n        }\n\n        if( enonAccessToken !== null ) {\n            document.getElementsByClassName(\"iframe-energieausweis-online\")[0].scrollIntoView();\n        }        \n    }\n\n    if(data.set_to_top !== undefined) {\n        document.getElementsByClassName(\"iframe-energieausweis-online\")[0].scrollIntoView();\n    }\n    \n    if(data.redirect_url !== undefined) {\n        document.location.href = data.redirect_url;\n    }\n}, false) ;"],"names":["setUrl","enonQueryString","window","location","search","enonUrlParams","URLSearchParams","enonIframeToken","get","enonAccessToken","enonSlug","enonUrl","enonIframe","document","getElementById","src","iframes","getElementsByClassName","i","length","style","display","addEventListener","event","origin","_typeof","data","JSON","parse","undefined","frame_height","iframe","push","contentWindow","source","height","overflow","scrollIntoView","set_to_top","redirect_url","href"],"sourceRoot":""}