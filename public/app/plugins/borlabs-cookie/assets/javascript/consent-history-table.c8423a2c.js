var N=(x,b,y)=>new Promise((H,C)=>{var S=o=>{try{m(y.next(o))}catch(r){C(r)}},v=o=>{try{m(y.throw(o))}catch(r){C(r)}},m=o=>o.done?H(o.value):Promise.resolve(o.value).then(S,v);m((y=y.apply(x,b)).next())});import{i as D,d as p,g as j,c as G,b as O}from"./localization.8b0c0006.js";import{_ as w}from"./selectors.4bfd398c.js";import{e as A,b as B,x as F,o as e,f as t,t as n,v as u,q as s,i as f,F as g,u as k,m as V}from"./vue.16a54326.js";const R={class:"brlbs-overflow-hidden"},U={key:0,class:"brlbs-text-center brlbs-text-base brlbs-font-bold brlbs-py-4"},q={key:1,tabindex:"0",class:"brlbs-cmpnt-table"},z={class:"brlbs-text-left"},E={class:"brlbs-text-left"},M={class:"brlbs-text-left"},J={key:0},K={colspan:"4",class:"brlbs-text-center"},P={class:"brlbs-font-bold"},Q={key:0},W={key:0},X={class:"brlbs-font-bold"},Y={key:0},Z={key:1},$={class:"brlbs-font-bold"},L={key:0},I={class:"brlbs-text-center"},ee={class:"brlbs-mt-4 brlbs-text-center brlbs-text-xxs"},re=A({__name:"consent-history-table",setup(x){const b=B([]),y=B(!0);F(()=>N(this,null,function*(){b.value=yield D.get(),y.value=!1}));const H=p.consentHistoryTableConsents,C=p.consentHistoryTableDate,S=p.consentHistoryTableVersion;function v(r){var d,a;return(a=(d=G.findByServiceId(r))==null?void 0:d.name)!=null?a:r}function m(r){var d,a;return(a=(d=O.findByServiceGroupId(r))==null?void 0:d.name)!=null?a:r}function o(r){if(r<b.value.length-1){const d=[],a=[],_=b.value[r].consents,l=b.value[r+1].consents;for(const i in _)if(i in l){const c=_[i],T=l[i];for(const h of c)T.includes(h)||d.push(h);for(const h of T)c.includes(h)||a.push(h)}else d.push(..._[i]);for(const i in l)i in _||a.push(...l[i]);return{added:d,removed:a}}else return{added:[],removed:[]}}return(r,d)=>(e(),t("div",R,[y.value?(e(),t("p",U,n(u(p).consentHistoryLoading.value),1)):(e(),t("table",q,[s("tr",null,[s("th",z,n(u(C)),1),s("th",E,n(u(H)),1),s("th",M,n(u(p).consentHistoryTableVersionChanges.value),1),s("th",null,n(u(S)),1)]),b.value.length===0?(e(),t("tr",J,[s("td",K,n(u(p).consentHistoryNoData.value),1)])):f("",!0),(e(!0),t(g,null,k(b.value,(a,_)=>(e(),t("tr",{key:a.stamp},[s("td",null,[s("p",null,n(a.stamp),1)]),s("td",null,[(e(!0),t(g,null,k(a.consents,(l,i)=>(e(),t("div",{key:i},[s("p",null,[s("span",P,n(m(i))+": ",1),(e(!0),t(g,null,k(l,(c,T,h)=>(e(),t("span",{key:c},[V(n(v(c))+" ",1),h&&h!=Object.keys(l).length-1?(e(),t("span",Q,", ")):f("",!0)]))),128))])]))),128))]),s("td",null,[o(_).added.length>0?(e(),t("div",W,[s("span",X,n(u(p).consentHistoryTableVersionChangesAdded.value)+": ",1),(e(!0),t(g,null,k(o(_).added,(l,i,c)=>(e(),t("span",{key:l},[V(n(v(l))+" ",1),c&&c!=Object.keys(o(c).added).length-1?(e(),t("span",Y,", ")):f("",!0)]))),128))])):f("",!0),o(_).removed.length>0?(e(),t("div",Z,[s("span",$,n(u(p).consentHistoryTableVersionChangesRemoved.value)+": ",1),(e(!0),t(g,null,k(o(_).removed,(l,i,c)=>(e(),t("span",{key:l},[V(n(v(l))+" ",1),c&&c!=Object.keys(o(c).removed).length-1?(e(),t("span",L,", ")):f("",!0)]))),128))])):f("",!0)]),s("td",I,[s("p",null,n(a.version),1)])]))),128))])),s("p",ee,n(u(w).dialogUid.value)+": "+n(u(j).pluginCookie.uid.toLocaleUpperCase()),1)]))}});export{re as _};
