var M=(L,_,h)=>new Promise((C,T)=>{var S=o=>{try{f(h.next(o))}catch(r){T(r)}},y=o=>{try{f(h.throw(o))}catch(r){T(r)}},f=o=>o.done?C(o.value):Promise.resolve(o.value).then(S,y);f((h=h.apply(L,_)).next())});import{i as N,d as b,g as x,c as B,b as D}from"./consents.BTukyEJU.min.js";import{_ as j}from"./observer.DYJbeI3G.min.js";import{e as G,a as V,q as O,o as s,f as t,t as c,u,s as e,i as p,F as k,C as H,m as w}from"./vue.yi1IrvfF.min.js";const A={class:"brlbs-overflow-hidden"},F={key:0,class:"brlbs-text-center brlbs-text-base brlbs-font-bold brlbs-py-4"},R={key:1,tabindex:"0",class:"brlbs-cmpnt-table"},U={class:"brlbs-text-left"},q={class:"brlbs-text-left"},z={class:"brlbs-text-left"},E={key:0},J={colspan:"4",class:"brlbs-text-center"},K={class:"brlbs-font-bold"},P=["innerHTML"],Q=["innerHTML"],W={key:0},X={key:0},Y={class:"brlbs-font-bold"},Z=["innerHTML"],$={key:0},I={key:1},ee={class:"brlbs-font-bold"},se=["innerHTML"],te={key:0},ne={class:"brlbs-text-center"},oe={class:"brlbs-mt-4 brlbs-text-center brlbs-text-xxs"},ie=G({__name:"consent-history-table",setup(L){const _=V([]),h=V(!0);O(()=>M(this,null,function*(){_.value=yield N.get(),h.value=!1}));const C=b.consentHistoryTableConsents,T=b.consentHistoryTableDate,S=b.consentHistoryTableVersion;function y(r){var d,l;return(l=(d=B.findByServiceId(r))==null?void 0:d.name)!=null?l:r}function f(r){var d,l;return(l=(d=D.findByServiceGroupId(r))==null?void 0:d.name)!=null?l:r}function o(r){if(r<_.value.length-1){const d=[],l=[],i=_.value[r].consents,a=_.value[r+1].consents;for(const n in i)if(n in a){const v=i[n],m=a[n];for(const g of v)m.includes(g)||d.push(g);for(const g of m)v.includes(g)||l.push(g)}else d.push(...i[n]);for(const n in a)n in i||l.push(...a[n]);return{added:d,removed:l}}else return{added:[],removed:[]}}return(r,d)=>(s(),t("div",A,[h.value?(s(),t("p",F,c(u(b).consentHistoryLoading.value),1)):(s(),t("table",R,[e("tr",null,[e("th",U,c(u(T)),1),e("th",q,c(u(C)),1),e("th",z,c(u(b).consentHistoryTableVersionChanges.value),1),e("th",null,c(u(S)),1)]),_.value.length===0?(s(),t("tr",E,[e("td",J,c(u(b).consentHistoryNoData.value),1)])):p("",!0),(s(!0),t(k,null,H(_.value,(l,i)=>(s(),t("tr",{key:l.stamp},[e("td",null,[e("p",null,c(l.stamp),1)]),e("td",null,[(s(!0),t(k,null,H(l.consents,(a,n)=>(s(),t("div",{key:n},[e("p",null,[e("span",K,[e("span",{innerHTML:f(n)},null,8,P),w(": ")]),(s(!0),t(k,null,H(a,(v,m)=>(s(),t("span",{key:v},[e("span",{innerHTML:y(v)},null,8,Q),m>=0&&m!=Object.keys(a).length-1?(s(),t("span",W,", ")):p("",!0)]))),128))])]))),128))]),e("td",null,[o(i).added.length>0?(s(),t("div",X,[e("span",Y,c(u(b).consentHistoryTableVersionChangesAdded.value)+": ",1),(s(!0),t(k,null,H(o(i).added,(a,n)=>(s(),t("span",{key:a},[e("span",{innerHTML:y(a)},null,8,Z),n>=0&&n!=Object.keys(o(i).added).length-1?(s(),t("span",$,", ")):p("",!0)]))),128))])):p("",!0),o(i).removed.length>0?(s(),t("div",I,[e("span",ee,c(u(b).consentHistoryTableVersionChangesRemoved.value)+": ",1),(s(!0),t(k,null,H(o(i).removed,(a,n)=>(s(),t("span",{key:a},[e("span",{innerHTML:y(a)},null,8,se),n>=0&&n!=Object.keys(o(i).removed).length-1?(s(),t("span",te,", ")):p("",!0)]))),128))])):p("",!0)]),e("td",ne,[e("p",null,c(l.version),1)])]))),128))])),e("p",oe,c(u(j).dialogUid.value)+": "+c(u(x).pluginCookie.uid.toLocaleUpperCase()),1)]))}});export{ie as _};
