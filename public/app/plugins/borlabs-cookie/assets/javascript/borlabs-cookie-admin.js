var Ue=Object.defineProperty;var Fe=(o,e,t)=>e in o?Ue(o,e,{enumerable:!0,configurable:!0,writable:!0,value:t}):o[e]=t;var x=(o,e,t)=>(Fe(o,typeof e!="symbol"?e+"":e,t),t);var S=(o,e,t)=>new Promise((n,s)=>{var r=c=>{try{a(t.next(c))}catch(T){s(T)}},l=c=>{try{a(t.throw(c))}catch(T){s(T)}},a=c=>c.done?n(c.value):Promise.resolve(c.value).then(r,l);a((t=t.apply(o,e)).next())});import{t as G,u as Ge,v as J,w as be,x as F,y as Ve,z as M,A as H,B as me,E as Te,F as Ke,G as ze,H as We,I as Xe,J as je,K as Qe,L as Ye,M as Je,N as Ze,R as P,a as $,O as V,P as et,Q as tt,S as pe,T as Ae,U as he,V as ge,W as Ce,X as nt,Y as qe,Z as st,$ as ot,a0 as Z,a1 as Se,a2 as rt,a3 as it,a4 as Le,a5 as xe,a6 as _e,a7 as W,a8 as at,a9 as lt,aa as ct,ab as He,ac as dt,ad as ee,ae as U,af as ut,ag as ye,ah as X,ai as we,aj as Re,ak as K,al as ve,am as Oe,an as Et,ao as ft,ap as bt,aq as mt,ar as Tt,as as pt,at as Ie,au as te,av as ne,aw as At,ax as ht,ay as se,az as oe,aA as re,aB as De,aC as gt,aD as Ct}from"./selectors.4bfd398c.js";import"./vue.16a54326.js";function w(o,e=500,t=null){return new Promise(n=>{if(!(o instanceof HTMLElement)){n();return}o.style.display="block",o.style.height="0px",o.style.opacity="0",o.style.overflow="hidden";let s=0;function r(l){s||(s=l);let a=l-s;if(!(o instanceof HTMLElement)){n();return}o.style.height=Math.pow(Math.min(a/e,1),2)*o.scrollHeight+"px",o.style.opacity=String(Math.pow(Math.min(a/e,1),2)),a<e?window.requestAnimationFrame(r):(o.style.height="",o.style.overflow="",typeof t=="function"&&t(),n())}window.requestAnimationFrame(r)})}function C(o,e=500,t=null){return new Promise(n=>{if(!(o instanceof HTMLElement)){n();return}o.style.display="block",o.style.overflow="hidden";let s=0;function r(l){s||(s=l);let a=l-s;if(!(o instanceof HTMLElement)){n();return}o.style.height=(1-Math.pow(Math.min(a/e,1),2))*o.scrollHeight+"px",o.style.opacity=String(1-Math.pow(Math.min(a/e,1),2)),a<e?window.requestAnimationFrame(r):(o.style.display="none",typeof t=="function"&&t(),n())}window.requestAnimationFrame(r)})}function ke(o,e=500){return new Promise(t=>S(this,null,function*(){if(!(o instanceof HTMLElement)){t();return}o.style.display==="block"?(yield C(o,e),t()):(yield w(o,e),t())}))}const St="#BorlabsCookie";class Lt{register(){const e=document.querySelectorAll(`${St} [${G}]`);for(const t of e)t.addEventListener("click",()=>S(this,null,function*(){const n=t.getAttribute(G);if(n===null)return;const s=document.getElementById(n);if(s instanceof HTMLElement)if(yield ke(s,300),t.getAttribute("aria-expanded")==="true")t.setAttribute("aria-expanded","false");else{t.setAttribute("aria-expanded","true");const r=t.parentNode;r instanceof HTMLElement&&r.getAttribute(Ge)!==null&&r.querySelectorAll(`[${G}]`).forEach(a=>S(this,null,function*(){if(!t.isEqualNode(a)&&a.getAttribute("aria-expanded")==="true"){const c=a.getAttribute(G);if(c===null)return;const T=document.getElementById(c);if(!(T instanceof HTMLElement))return;yield ke(T,300),a.setAttribute("aria-expanded","false")}}))}}))}}const _t=new Lt,Me="#BorlabsCookie";class yt{register(){document.querySelectorAll(`${Me} [${J}]`).forEach(s=>{s instanceof HTMLButtonElement&&s.addEventListener("change",function(){this instanceof HTMLSelectElement&&n(this.selectedOptions[0].value,this.getAttribute(J))})}),document.querySelectorAll(`${Me} [${be}]`).forEach(s=>{s instanceof HTMLButtonElement&&s.addEventListener("click",function(){const r=document.querySelector("#"+this.getAttribute(be));r instanceof HTMLSelectElement&&n(r.selectedOptions[0].value,r.getAttribute(J))})});const n=function(s,r){const l=document.querySelector("#"+r);l instanceof HTMLDivElement&&(l.className="animate__animated animate__"+s,window.setTimeout(()=>{l.className=""},1500))}}}const wt=new yt;function Rt(o,e,t){let n=o.target;n.matches(e)||(n=n.closest(e)),n!==null&&n.matches(e)&&t(n)}function _(o,e,t,n){const s=document.querySelector(o);s&&s.addEventListener(e,r=>{Rt(r,t,n)})}const $e="#BorlabsCookie";class vt{register(){const e=document.querySelectorAll($e+" [aria-modal]");document.querySelectorAll(`${$e} [${F}]`).forEach(n=>{this.registerButtonEvents(n)}),e.forEach(n=>{this.registerCloseListener(n)})}registerButtonEvents(e){e.addEventListener("click",t=>{t.preventDefault();const n=e.getAttribute(F);if(n===void 0)return;const s=document.getElementById(n);s&&(s.getAttribute("aria-hidden")==="true"?s.setAttribute("aria-hidden","false"):s.setAttribute("aria-hidden","true"))})}registerCloseListener(e){document.addEventListener("keydown",t=>{t.key==="Escape"&&e.setAttribute("aria-hidden","true")})}}const ie=new vt,Ne="#BorlabsCookie";class Ot{register(){const e=n=>{if(!(n instanceof HTMLElement))return;const s=document.querySelector(`table[${M}="${n.getAttribute(Te)}"]`);s&&this.addRow(s)};_(Ne,"click",`[${Te}]`,e);const t=n=>{var l;const s=n.closest("tr"),r=s==null?void 0:s.closest("table");(l=s==null?void 0:s.parentNode)==null||l.removeChild(s),r&&this.handleEmptyTableMessage(r)};_(Ne,"click",`button[${Ke}][type="button"]`,t)}addRow(e,t){var m;if(!(e instanceof HTMLTableElement))return;const n=e.querySelector("tbody"),s=document.querySelector(`[${Ve}="${e.getAttribute(M)}"]`),r=document.createElement("tr"),l=document.createElement("table"),a=document.createElement("tbody");if(n===null||s===null)return;l.appendChild(a),a.insertAdjacentHTML("beforeend",s.innerHTML);const c=l.querySelector("tr");if(c===null)return;c.classList.forEach(f=>{r.classList.add(f)}),n.getAttribute(H)===null?n.setAttribute(H,n.querySelectorAll("tr").length.toString()):n.setAttribute(H,(parseInt((m=n.getAttribute(H))!=null?m:"0")+1).toString());const T=n.getAttribute(H);c.querySelectorAll("td").forEach(f=>{const A=document.createElement("td");if(A.innerHTML=f.innerHTML.replaceAll("##LOOP_INDEX##",T.toString()),t!==void 0){for(const i in t)if(Object.prototype.hasOwnProperty.call(t,i)){const u=t[i];A.innerHTML=A.innerHTML.replaceAll(`##${i.toUpperCase()}##`,u)}}else A.innerHTML=A.innerHTML.replace(/##.*?##/g,"");f.classList.forEach(i=>{A.classList.add(i)}),r.appendChild(A)}),n.appendChild(r),r.querySelectorAll(`[${F}]`).forEach(f=>{ie.registerButtonEvents(f)}),ie.registerCloseListener(r.querySelector("[aria-modal]")),e instanceof HTMLTableElement&&this.handleEmptyTableMessage(e)}clearTable(e){const t=e.querySelector("tbody"),n=t.querySelectorAll("tr"),s=t.querySelector(`[${me}]`);n.forEach(r=>{r!==s&&r.parentNode.removeChild(r)}),this.handleEmptyTableMessage(e)}handleEmptyTableMessage(e){const t=e.querySelector("tbody"),n=t.querySelectorAll("tr"),s=t.querySelector(`[${me}]`);s&&(n.length>1?s.classList.add("bc-hidden"):s.classList.remove("bc-hidden"))}}const R=new Ot,Be="#BorlabsCookie";class It{constructor(){x(this,"acceptServiceUnblockContent","");x(this,"description","");x(this,"moreInformation","");x(this,"unblockButton","")}register(){const e=document.querySelector(`${Be} [${ze}]`),t=document.querySelector(`${Be} [${We}]`),n=document.querySelector("#previewHtml + .CodeMirror"),s=document.querySelector(`[${Xe}]`),r=document.querySelector("#previewImage");e!==null&&(this.acceptServiceUnblockContent=e.getAttribute(je),this.description=e.getAttribute(Qe),this.moreInformation=e.getAttribute(Ye),this.unblockButton=e.getAttribute(Je),s.innerHTML=this.getPreviewImageForPresets(e.value),e.addEventListener("change",()=>{s.innerHTML=this.getPreviewImageForPresets(e.value)}),e&&t&&t.addEventListener("click",l=>{if(l.preventDefault(),n&&"CodeMirror"in n){n.CodeMirror.setValue(this.getCodeForPreset(e.value)),e.value==="preset-c"&&(r.value=e.getAttribute(Ze));const a=document.querySelector(`table[${M}="languageStrings"]`);R.clearTable(a),R.addRow(a,{key:"acceptServiceUnblockContent",value:this.acceptServiceUnblockContent}),R.addRow(a,{key:"description",value:this.description}),R.addRow(a,{key:"moreInformation",value:this.moreInformation}),R.addRow(a,{key:"unblockButton",value:this.unblockButton})}}))}getPreviewImageForPresets(e){return{"preset-a":`<svg width="200" viewBox="0 0 344 216" fill="none" xmlns="http://www.w3.org/2000/svg">
  <rect x="0.5" y="0.5" width="343" height="215" rx="14.5" fill="#EDEDED" stroke="#D6D6D6"/>
  <rect x="80" y="37" width="184" height="28" rx="5" fill="#B6B6B6"/>
  <rect x="116" y="162" width="111" height="16" rx="5" fill="#B6B6B6"/>
  <rect x="80" y="84" width="184" height="28" rx="5" fill="#0063E3"/>
  <rect x="80" y="121" width="184" height="28" rx="5" fill="#0063E3"/>
  <rect x="80" y="74" width="184" height="1" fill="#D6D6D6"/>
</svg>`,"preset-b":`<svg width="200" viewBox="0 0 344 216" fill="none" xmlns="http://www.w3.org/2000/svg">
<rect x="0.5" y="0.5" width="343" height="215" rx="14.5" fill="#2F2F2F" stroke="#D6D6D6"/>
<rect y="51" width="344" height="113" fill="#EDEDED"/>
<rect x="14" y="85" width="159" height="16" rx="5" fill="#B6B6B6"/>
<rect x="14" y="109" width="86" height="11" rx="5" fill="#B6B6B6"/>
<rect x="220" y="85" width="105" height="18" rx="5" fill="#0063E3"/>
<rect x="220" y="115" width="105" height="18" rx="5" fill="#0063E3"/>
</svg>`,"preset-c":`<svg width="200" viewBox="0 0 344 216" fill="none" xmlns="http://www.w3.org/2000/svg">
<rect x="0.5" y="0.5" width="343" height="215" rx="14.5" fill="#2F2F2F" stroke="#D6D6D6"/>
<rect x="30" y="40" width="284" height="145" fill="#EDEDED"/>
<rect x="80" y="56" width="184" height="21" rx="5" fill="#B6B6B6"/>
<rect x="116" y="86" width="111" height="16" rx="5" fill="#B6B6B6"/>
<rect x="80" y="114" width="184" height="24" rx="5" fill="#0063E3"/>
<rect x="80" y="147" width="184" height="23" rx="5" fill="#0063E3"/>
<circle cx="172" cy="42" r="19.5" fill="white" stroke="#B6B6B6"/>
<path fill-rule="evenodd" clip-rule="evenodd" d="M165.5 35.653C165.5 34.227 167.029 33.323 168.279 34.01L179.819 40.358C181.114 41.07 181.114 42.931 179.819 43.643L168.28 49.991C167.03 50.678 165.501 49.774 165.501 48.348L165.5 35.653Z" fill="black"/>
</svg>`}[e]}getCodeForPreset(e){return{"preset-a":`<div class="brlbs-cmpnt-cb-preset-a">
  <p class="brlbs-cmpnt-cb-description">{{ description }}</p>
  <div class="brlbs-cmpnt-cb-buttons">
    <a class="brlbs-cmpnt-cb-btn" href="#" data-borlabs-cookie-unblock role="button">{{ unblockButton }}</a>
    <a class="brlbs-cmpnt-cb-btn" href="#" data-borlabs-cookie-accept-service role="button" style="display: {{ serviceConsentButtonDisplayValue }}">{{ acceptServiceUnblockContent }}</a>
  </div>
  <a class="brlbs-cmpnt-cb-provider-toggle" href="#" data-borlabs-cookie-show-provider-information role="button">{{ moreInformation }}</a>
</div>`,"preset-b":`<div class="brlbs-cmpnt-cb-preset-b">
  <div class="brlbs-cmpnt-cb-thumbnail" style="background-image: url('{{ previewImage }}')"></div>
  <div class="brlbs-cmpnt-cb-main">
    <div class="brlbs-cmpnt-cb-content">
      <p class="brlbs-cmpnt-cb-description">{{ description }}</p>
      <a class="brlbs-cmpnt-cb-provider-toggle" href="#" data-borlabs-cookie-show-provider-information role="button">{{ moreInformation }}</a>
    </div>
     <div class="brlbs-cmpnt-cb-buttons">
       <a class="brlbs-cmpnt-cb-btn" href="#" data-borlabs-cookie-unblock role="button">{{ unblockButton }}</a>
      <a class="brlbs-cmpnt-cb-btn" href="#" data-borlabs-cookie-accept-service role="button" style="display: {{ serviceConsentButtonDisplayValue }}">{{ acceptServiceUnblockContent }}</a>
     </div>
   </div>
</div>`,"preset-c":`<div class="brlbs-cmpnt-cb-preset-c">
  <div class="brlbs-cmpnt-cb-thumbnail" style="background-image: url('{{ previewImage }}')"></div>
  <div class="brlbs-cmpnt-cb-main">
    <div class="brlbs-cmpnt-cb-play-button"></div>
    <div class="brlbs-cmpnt-cb-content">
      <p class="brlbs-cmpnt-cb-description">{{ description }}</p>
      <a class="brlbs-cmpnt-cb-provider-toggle" href="#" data-borlabs-cookie-show-provider-information role="button">{{ moreInformation }}</a>
    </div>
     <div class="brlbs-cmpnt-cb-buttons">
       <a class="brlbs-cmpnt-cb-btn" href="#" data-borlabs-cookie-unblock role="button">{{ unblockButton }}</a>
      <a class="brlbs-cmpnt-cb-btn" href="#" data-borlabs-cookie-accept-service role="button" style="display: {{ serviceConsentButtonDisplayValue }}">{{ acceptServiceUnblockContent }}</a>
     </div>
   </div>
</div>`}[e]}}const Dt=new It;var j=(o=>(o.SCANNING="scanning",o.ANALYZING="analyzing",o.FINISHED="finished",o))(j||{});function kt(o){return P("GET","borlabs-cookie/v1/cloud-scan/"+o,null).then(e=>e).catch(e=>{$.error(e)})}const N="#BorlabsCookie";class Mt{register(){this.hideOrShowCustomScanPage(),this.initCustomScanPage()}hideOrShowCustomScanPage(){const e=document.querySelector(N+" #selectPageType");e instanceof HTMLSelectElement&&e.addEventListener("change",()=>{this.showCustomScanPageIfCustomIsSelected()})}initCustomScanPage(){const e=window.document.querySelector(`${N} [${V}]`);if(e instanceof HTMLDivElement){const t=e.getAttribute(V);t!==null&&this.scanResults(parseInt(t))}this.showCustomScanPageIfCustomIsSelected()}showCustomScanPageIfCustomIsSelected(){const e=document.querySelector(N+" #selectPageType");if(e instanceof HTMLSelectElement)if(e.value==="custom"){const n=document.querySelector(N+" #customScanPage");n instanceof HTMLDivElement&&n.classList.remove("bc-hidden")}else{const n=document.querySelector(N+" #customScanPage");n instanceof HTMLDivElement&&n.classList.add("bc-hidden")}}scanResults(e){return S(this,null,function*(){var s;for(var n=120;n>0;n--){let r=yield kt(e),l=window.document.getElementById("borlabs-cookie-cloud-scan-progress-bar");if(r)if(r.status.valueOf()===j.FINISHED){let a=(s=window.document.querySelector(`[${V}]`))==null?void 0:s.getAttribute(et);if(a!=null){l!==null&&(l.style.width="100%",yield new Promise(c=>setTimeout(c,1e3))),window.location.href=a;return}else console.log("Reload URL not found.");break}else{let a=r.finishedPagesCount+r.scanningPagesCount+r.failedPagesCount,c=window.document.getElementById("borlabs-cookie-cloud-scan-finished-count");c!==null&&(c.textContent=r.finishedPagesCount.toString());let T=window.document.getElementById("borlabs-cookie-cloud-scan-scanning-count");T!==null&&(T.textContent=r.scanningPagesCount.toString());let m=window.document.getElementById("borlabs-cookie-cloud-scan-failure-count");if(m!==null&&(m.textContent=r.failedPagesCount.toString()),l!==null){let f=Math.round(r.finishedPagesCount/a*100);l.style.width=(f>=90?90:f)+"%"}r.status.valueOf()===j.ANALYZING&&(Array.from(window.document.getElementsByClassName("borlabs-cookie-cloud-scan-status-scanning")).forEach(f=>{f.classList.add("bc-hidden")}),Array.from(window.document.getElementsByClassName("borlabs-cookie-cloud-scan-status-analysing")).forEach(f=>{f.classList.remove("bc-hidden")}),l!==null&&(l.style.width="95%",yield new Promise(f=>setTimeout(f,1e3)))),r.status.valueOf()===j.SCANNING&&Array.from(window.document.getElementsByClassName("borlabs-cookie-cloud-scan-status-analysing")).forEach(f=>{f.classList.add("bc-hidden")})}else this.handleScanResultsError();yield new Promise(a=>setTimeout(a,5e3))}this.handleScanResultsError()})}handleScanResultsError(){var t;let e=(t=window.document.querySelector(`${N} [${V}]`))==null?void 0:t.getAttribute(tt);e!=null?window.location.href=e:console.log("Overview redirect URL not found.")}}const $t=new Mt,y="#BorlabsCookie";class Nt{register(){_(y,"click",`button[${F}]`,a=>{const c=document.querySelector(`#${a.getAttribute(F)}`);this.processConsentParameters(c,"purpose","purposes"),this.processConsentParameters(c,"feature","features"),this.processConsentParameters(c,"leg-int-purpose","purposes"),this.processConsentParameters(c,"special-feature","specialFeatures"),this.processConsentParameters(c,"special-purpose","specialPurposes"),this.processConsentParameters(c,"data-category","dataCategories")});const e=document.querySelectorAll(`${y} input[${pe}]`),t=document.querySelectorAll(`${y} input[${Ae}]`),n=document.querySelectorAll(`${y} input[${he}]`),s=document.querySelectorAll(`${y} input[${ge}]`);this.setLabels(e,"purposes"),this.setLabels(t,"features"),this.setLabels(n,"specialFeatures"),this.setLabels(s,"specialPurposes"),_(y,"click",`button[${rt}]`,a=>{this.setVendorPreviewListItems()});const r=document.querySelector(`${y} input[${Ce}]`),l=r?r.closest("form"):null;l&&l.addEventListener("submit",a=>S(this,null,function*(){a.target instanceof HTMLFormElement&&this.fillVendorIdsInput()}))}fillVendorIdsInput(){const e=this.getConfiguredVendors(),t=document.querySelector(`${y} input[${Ce}]`);t.value=e.ids.join(",")}setVendorPreviewListItems(){return S(this,null,function*(){const e=this.getConfiguredVendors(),t=document.querySelector(`${y} div[${nt}]`),n=document.querySelector(`${y} div[${qe}]`),s=new Intl.Collator(void 0,{numeric:!0,sensitivity:"base"});if(e.names.sort(s.compare),window.getComputedStyle(t).display!=="none"&&(yield C(t)),window.getComputedStyle(n).display!=="none"&&(yield C(n)),e.names.length){const r=document.querySelector(`${y} ul[${st}]`);r.innerHTML="",e.names.forEach(l=>{let a=document.createElement("li");a.textContent=l,r.appendChild(a)}),yield Promise.all([w(n)])}else yield Promise.all([w(t)])})}getConfiguredVendors(){let e={ids:[],names:[]},t=[];const n=this.getIdsOfConsentParameter(document.querySelectorAll(`input[${pe}]:checked`)),s=this.getIdsOfConsentParameter(document.querySelectorAll(`input[${Ae}]:checked`)),r=this.getIdsOfConsentParameter(document.querySelectorAll(`input[${he}]:checked`)),l=this.getIdsOfConsentParameter(document.querySelectorAll(`input[${ge}]:checked`)),a=document.querySelector(`${y} textarea[${ot}]`);return a&&(t=a.value.split(",").map(c=>parseInt(c.trim())).filter(c=>!isNaN(c))),typeof window.borlabsCookieGlobals.iabTcfVendors!="undefined"&&Object.entries(window.borlabsCookieGlobals.iabTcfVendors).forEach(([c,T])=>{let m=!1;m=n.filter(f=>T.purposes.indexOf(f)!==-1).length>0?!0:m,m=s.filter(f=>T.features.indexOf(f)!==-1).length>0?!0:m,m=r.filter(f=>T.specialFeatures.indexOf(f)!==-1).length>0?!0:m,m=l.filter(f=>T.specialPurposes.indexOf(f)!==-1).length>0?!0:m,m=t.indexOf(T.id)!==-1?!0:m,m&&(e.ids.push(parseInt(c)),e.names.push(T.name))}),e}getIdsOfConsentParameter(e){return Array.from(e).map(t=>t.hasAttribute(`${Z}`)?parseInt(t.getAttribute(`${Z}`)):null)}setLabels(e,t){e.forEach(n=>{let s=parseInt(n.getAttribute(`${Z}`)),r=document.querySelector(`label[for="${n.id}"]`),l=window.borlabsCookieGlobals.iabTcfTranslation[t].list.find(a=>a.id===s);r.innerHTML=l&&l.name?`${l.name} <em>(${s})</em>`:r.innerHTML})}processConsentParameters(e,t,n){e.querySelectorAll(`[${Se}-${t}]`).forEach(s=>{let r=parseInt(s.getAttribute(`${Se}-${t}`)),l=window.borlabsCookieGlobals.iabTcfTranslation[n].list.find(a=>a.id===r);s.innerText=l&&l.name?l.name:s.innerText})}}const Bt=new Nt,Pt=function(o,e,t,n){return o/=n/2,o<1?t/2*o*o+e:(o--,-t/2*(o*(o-2)-1)+e)};function ae(o,e,t){return new Promise(n=>{const s=o.scrollTop,r=e-s,l=20;let a=0;const c=function(){a+=l,o.scrollTop=Pt(a,s,r,t),a<t?setTimeout(c,l):n()};c()})}function qt(o){return P("GET","borlabs-cookie/v1/helper/permalink/"+o,{}).then(e=>e.permalink)}function xt(o){return P("POST","borlabs-cookie/v1/package/install/"+o.id,o).then(e=>e).catch(e=>{$.error(e)})}const v="#BorlabsCookie";class Ht{register(){document.querySelectorAll(`${v} [${it}]`).forEach(i=>{i.addEventListener("click",function(u){u.preventDefault();const d=document.querySelector(`[id="${this.hash.replace("#","")}"]`);d!==null&&ae(document.documentElement,d.getBoundingClientRect().top+window.scrollY-64,1e3)})});const t=function(i){var d;const u=document.querySelector("#"+i.getAttribute(X));if(u&&(i.classList.contains("active")?(u.value="0",i.classList.remove("active"),i.setAttribute("aria-pressed","false"),i.setAttribute("aria-checked","false")):(u.value="1",i.classList.add("active"),i.setAttribute("aria-pressed","true"),i.setAttribute("aria-checked","true"))),i.getAttribute(ve)!==null){const b=(d=i.getAttribute(ve))==null?void 0:d.split(",");let p=!0;(!i.classList.contains("active")&&i.getAttribute(Oe)==="true"||i.classList.contains("active")&&i.getAttribute(Oe)==="false")&&(p=!1),b==null||b.forEach(h=>{const E=document.querySelector("#"+h);E&&(E.disabled=p)})}};_(v,"click",`[${X}]`,t);const n=function(i){const u=document.querySelector("#"+i.getAttribute(we));if(u instanceof HTMLButtonElement||u instanceof HTMLInputElement||u instanceof HTMLSelectElement||u instanceof HTMLTextAreaElement){const d=i;u.disabled=d.checked}};_(v,"click",`[${we}]`,n);const s=function(i){const u=document.querySelector("#"+i.getAttribute(Re));if(u instanceof HTMLButtonElement||u instanceof HTMLInputElement||u instanceof HTMLSelectElement||u instanceof HTMLTextAreaElement){const d=i;u.disabled=!d.checked}};_(v,"click",`[${Re}]`,s);const r=function(i){const u=document.querySelector("#"+i.getAttribute(K));let d=!1;if(!(i instanceof HTMLSelectElement)){if(i instanceof HTMLButtonElement){const b=document.querySelector("#"+i.getAttribute(X));b&&(d=parseInt(b.value)>0)}else i instanceof HTMLInputElement&&(d=i.checked);u&&(u.style.display=d?"block":"none")}};_(v,"click",`[${K}]`,r);const l=function(i){var b;const u=document.querySelector("#"+i.getAttribute(K));let d=!1;if(i instanceof HTMLSelectElement){if(i instanceof HTMLSelectElement){const p=(b=i.getAttribute(Et))==null?void 0:b.split(","),h=Array.from(i.selectedOptions).map(E=>E.value);d=!!p.find(E=>h.includes(E))}u&&(u.style.display=d?"block":"none")}};_(v,"change",`[${K}]`,l),document.querySelectorAll(`${v} [${Le}]`).forEach(i=>{i.addEventListener("click",function(u){u.preventDefault();const d=document.querySelector("#"+this.getAttribute(xe));d instanceof HTMLDivElement&&(d.innerHTML="");const b=document.querySelector("#"+this.getAttribute(Le));b instanceof HTMLInputElement&&(b.value="")})}),document.querySelectorAll(`${v} [${_e}]`).forEach(i=>{i.addEventListener("click",function(u){return S(this,null,function*(){const d=document.querySelector("#"+this.getAttribute(_e));if(d instanceof HTMLSelectElement){this.setAttribute(W,"true");const b=parseInt(d.selectedOptions[0].value);if(b>0){const p=yield qt(b);if(typeof p=="string"&&p.length>0){const h=document.querySelector("#"+this.getAttribute(at));h instanceof HTMLTextAreaElement&&(h.value+=(h.value.length?`
`:"")+p)}}delete this.removeAttribute(W)}})})}),document.querySelectorAll(`${v} [${lt}]`).forEach(i=>{i.addEventListener("submit",function(u){return S(this,null,function*(){if(u.stopPropagation(),u.preventDefault(),!i.checkValidity())return;const d=u.target;if(!(d instanceof HTMLFormElement))return;const b=d.querySelector(`[${ct}]`),p=d.querySelector(`[${W}]`),h=d.querySelector(`[${He}]`),E=d.querySelector(`[${qe}]`);if(!(b instanceof HTMLElement)||!(p instanceof HTMLElement)||!(h instanceof HTMLElement)||!(E instanceof HTMLElement)||(yield C(b),yield w(p),!(d.querySelector('[name="id"]')instanceof HTMLInputElement)))return;const Q=new FormData(d),le={};Q.forEach((I,Y)=>{le[Y]=I});const O=yield xt(le);if(!O||Array.isArray(O.list)&&O.list.length===0){yield C(p),yield w(h);return}function ce(I,Y,de){for(const D of Y.list){const q=document.createElement("tr");q.classList.add("brlbs-cmpnt-level-"+de);const ue=document.createElement("td"),Ee=document.createElement("td"),fe=document.createElement("td");ue.classList.add("brlbs-cmpnt-status-"+D.status),Ee.textContent=typeof window.borlabsCookieGlobals.componentTypes[D.componentType]!==null?window.borlabsCookieGlobals.componentTypes[D.componentType]:D.componentType,fe.textContent=D.name,q.appendChild(ue),q.appendChild(Ee),q.appendChild(fe),I.appendChild(q),D.subComponentsInstallationStatus&&ce(I,D.subComponentsInstallationStatus,de+1)}}if(O&&Array.isArray(O.list)&&O.list.length>0){const I=d.querySelector(`[${dt}]`);I instanceof HTMLTableSectionElement&&ce(I,O,0)}yield C(p),yield w(E)})})});const m=(i,u)=>{i.preventDefault();const d=u.querySelector(`[${U}="dragging"]`);if(d===null)return;let p=[...u.querySelectorAll(`[${U}=""]`)].find(h=>{let E=h.getBoundingClientRect();return i.clientY<=E.top+h.offsetHeight/2});p?u.insertBefore(d,p):u.appendChild(d)},f=i=>{const u=document.querySelector(`[${ee}="${i}"]`),d=document.querySelector(`input[${ut}="${i}"]`);u===null||d===null||(d.value=JSON.stringify([...u.querySelectorAll(`[${ye}]`)].map(b=>b.getAttribute(ye))))};document.querySelectorAll(v+` [${ee}]`).forEach(i=>{i.querySelectorAll(`[${U}]`).forEach(d=>{d.addEventListener("dragstart",()=>{d.setAttribute(U,"dragging")}),d.addEventListener("dragend",()=>{d.setAttribute(U,""),f(i.getAttribute(ee))})}),i.addEventListener("dragover",d=>m(d,i)),i.addEventListener("dragenter",d=>d.preventDefault())})}}const Ut=new Ht;var B=(o=>(o.CORE="core",o.EXTERNAL="external",o.OTHER="other",o.PLUGIN="plugin",o.THEME="theme",o))(B||{});function Ft(o){return P("GET","borlabs-cookie/v1/scan-result/"+o,null).then(e=>e).catch(e=>{$.error(e)})}function Gt(o){return P("POST","borlabs-cookie/v1/scan-request/",o).then(e=>e).catch(e=>{$.error(e)})}function Vt(o){return P("POST","borlabs-cookie/v1/scan/",{signedUrl:o}).then(e=>e).catch(e=>{$.error(e)})}const L="#BorlabsCookie";class Kt{register(){const e=document.querySelector(`${L} [${ft}]`);e instanceof HTMLButtonElement&&"handleTypes"in window.borlabsCookieGlobals&&"scanResultTables"in window.borlabsCookieGlobals&&"scanResultTables"in window.borlabsCookieGlobals&&e.addEventListener("click",t=>S(this,null,function*(){if(t.preventDefault(),!(t.target instanceof HTMLButtonElement))return;const n=t.target.closest("form"),s=n.querySelector(`div[${He}]`),r=n.querySelector(`div[${bt}]`),l=r.querySelector(`div[${W}]`),a=document.querySelector(`${L} [${mt}]`),c=r.querySelector(`div[${Tt}]`),T=r.querySelector(`script[${pt}]`),m=document.querySelector(`${L} [${Ie}]`),f=document.querySelectorAll(`${L} [${te}]`),A={matchedHandles:document.querySelector(`${L} [${M}="${window.borlabsCookieGlobals.scanResultTables.matchedHandles}"]`),matchedTags:document.querySelector(`${L} [${M}="${window.borlabsCookieGlobals.scanResultTables.matchedTags}"]`),unmatchedHandles:document.querySelector(`${L} [${M}="${window.borlabsCookieGlobals.scanResultTables.unmatchedHandles}"]`),unmatchedTags:document.querySelector(`${L} [${M}="${window.borlabsCookieGlobals.scanResultTables.unmatchedTags}"]`)};for(const E in A)A.hasOwnProperty(E)&&R.clearTable(A[E]);if(f.length<=0)return;let i="";for(const E of f)E instanceof HTMLInputElement&&!E.disabled&&(i=E.value),E instanceof HTMLSelectElement&&!E.disabled&&(i=E.options[E.selectedIndex].value);if(!this.isPageSelectionValid()||!this.isCustomUrlValid()||!this.isSearchPhraseValid())return;t.target.disabled=!0,window.getComputedStyle(r).display!=="none"?(yield C(r),yield Promise.all([C(l),C(s)]),yield this.showProgressElements(r,l)):yield this.showProgressElements(r,l);const u=yield Gt({searchPhrase:m.value,scanRequestOption:window.borlabsCookieGlobals.scanRequestOption,url:i});if(typeof u=="undefined"){t.target.disabled=!1,yield Promise.all([C(l),w(s)]);return}const d=a.options[a.selectedIndex].value;if(d==="manual")c.innerHTML=T.innerHTML.replace("##SIGNED_URL##",u.signedUrl),yield w(c);else if(d==="current-user")this.performScanAsCurrentUserForUrl(u.signedUrl);else if(d==="guest"){const E=yield Vt(u.signedUrl);if(typeof E!="undefined"&&typeof E.success!="undefined"&&E.success===!1){t.target.disabled=!1,yield Promise.all([C(l),w(s)]),$.error(E.messageCode);return}}const b=yield this.waitForScanResult(u.scanRequestId);t.target.disabled=!1,yield Promise.all([C(r),C(l)]),yield Promise.all([C(s),C(c)]);const p=(E,g)=>E.filter(Q=>Q.type===g),h=[B.EXTERNAL,B.CORE,B.THEME,B.PLUGIN,B.OTHER];b.matchedHandles.list.length&&h.forEach(E=>{p(b.matchedHandles.list,E).forEach(g=>{R.addRow(A.matchedHandles,{handle:g.handle,phrase:g.phrase,type:window.borlabsCookieGlobals.handleTypes[g.type]!==null?window.borlabsCookieGlobals.handleTypes[g.type]:g.type,url:g.url})})}),b.matchedTags.list.length&&b.matchedTags.list.forEach(E=>{R.addRow(A.matchedTags,{phrase:E.phrase,tag:E.tag})}),b.unmatchedHandles.list.length&&h.forEach(E=>{p(b.unmatchedHandles.list,E).forEach(g=>{R.addRow(A.unmatchedHandles,{handle:g.handle,phrase:"",type:window.borlabsCookieGlobals.handleTypes[g.type]!==null?window.borlabsCookieGlobals.handleTypes[g.type]:g.type,url:g.url})})}),b.unmatchedTags.list.length&&b.unmatchedTags.list.forEach(E=>{R.addRow(A.unmatchedTags,{phrase:"",tag:E.tag})})})),_(L,"input",`input[${ne}]`,t=>{const n=document.querySelector(`#${t.getAttribute(ne)}`);this.validatePhraseInput(t,n)}),_(L,"input",`input[${At}]`,t=>{t.reportValidity()})}waitForScanResult(e){return S(this,null,function*(){let t;for(;!t;)t=yield Ft(e),yield new Promise(n=>setTimeout(n,2500));return t})}isPageSelectionValid(){const e=document.querySelector(`${L} select[${te}]`);return e.classList.remove("!bc-border-red-500","!bc-text-red-600","!focus:bc-border-red-500","!bc-ring-red-500"),e.disabled?!0:e.options[e.selectedIndex].value==="0"?(e.classList.add("!bc-border-red-500","!bc-text-red-600","!focus:bc-border-red-500","!bc-ring-red-500"),!1):!0}isCustomUrlValid(){const e=document.querySelector(`${L} input[${te}]`),t=e.closest("form");return e.disabled?!0:e.value===""?(e.required=!0,e.reportValidity(),t.classList.add("bc-was-validated"),!1):(e.required=!1,!0)}isSearchPhraseValid(){const e=document.querySelector(`${L} [${Ie}]`),t=e.closest("form");return e.value.length<3?(e.required=!0,e.reportValidity(),t.classList.add("bc-was-validated"),!1):(e.required=!1,!0)}performScanAsCurrentUserForUrl(e){const t=document.createElement("iframe");t.setAttribute("sandbox",""),t.src=e,t.style.display="none",t.addEventListener("load",()=>{setTimeout(()=>{t.remove()},0)}),document.body.appendChild(t)}showProgressElements(e,t){return S(this,null,function*(){yield w(e,500),yield w(t,500),yield ae(document.documentElement,e.offsetTop-e.offsetHeight,1e3)})}validatePhraseInput(e,t){const n=e.value,s=t.value;if(this.matchesInput(s,n)){e.setCustomValidity("");const l=document.querySelectorAll(`input[${ne}]:enabled`);let a=!1;l.forEach(c=>{c!==e&&n.length>0&&c.value.length>0&&(c.value.indexOf(n)>=0||n.indexOf(c.value)>=0)&&(a=!0)}),a?e.setCustomValidity(window.borlabsCookieGlobals.scanResultValidationMessages.phraseIsNotUnique):e.setCustomValidity("")}else e.setCustomValidity(window.borlabsCookieGlobals.scanResultValidationMessages.phraseDoesNotMatch);e.reportValidity();const r=e.closest("form");r.checkValidity(),r.classList.add("bc-was-validated")}matchesInput(e,t){try{return new RegExp(t).test(e)}catch(n){return e.includes(t)}}}const zt=new Kt,Wt="#BorlabsCookie";class Xt{register(){const e=document.querySelectorAll(Wt+" .needs-validation");Array.from(e).forEach(t=>{t.addEventListener("submit",n=>{if(!t.checkValidity()){n.preventDefault(),n.stopPropagation();const s=document.querySelectorAll(":invalid")[1];typeof s!="undefined"&&ae(document.documentElement,s.getBoundingClientRect().top+window.scrollY-64,1e3)}t.classList.add("was-validated")},!1)})}}const jt=new Xt,Qt="#BorlabsCookie";class Yt{register(){document.querySelectorAll(`${Qt} [${ht}]`).forEach(t=>{t.addEventListener("change",function(n){return S(this,null,function*(){const s=this.options[this.selectedIndex].value;let r=new URL(location.href);r.searchParams.set("borlabs-cookie-language",s),location.href=r.href})})})}}const Jt=new Yt;class Zt{register(){const e=jQuery("#geoIpCountriesWithHiddenDialog");e.multiSelect({selectableOptgroup:!0,selectableHeader:'<div class="pb-1 text-bold bg-light">'+e.data("brlbsLocalizationHidelistHeader")+"</div>",selectionHeader:'<div class="pb-1 text-bold bg-light">'+e.data("brlbsLocalizationShowlistHeader")+"</div>"})}}const en=new Zt,tn="#BorlabsCookie";class nn{toggleDropdown(e){e.classList.toggle("bc-bg-gray-100"),this.getTargetDropdownElement(e).classList.toggle("bc-hidden"),e.getAttribute("aria-expanded")==="true"?e.setAttribute("aria-expanded","false"):e.setAttribute("aria-expanded","true")}register(){const e=document.querySelectorAll(tn+" #primary-navigation [aria-controls]");for(const n of e)n.addEventListener("click",function(s){k.toggleDropdown(n)});document.addEventListener("click",function(n){for(const s of e){const r=k.getTargetDropdownElement(s);s.getAttribute("aria-expanded")==="true"&&s!==n.target&&n.target instanceof Node&&!s.contains(n.target)&&!r.contains(n.target)&&k.toggleDropdown(s)}}),document.addEventListener("keydown",function(n){if(n.key==="Escape")for(const s of e)k.getTargetDropdownElement(s),s.getAttribute("aria-expanded")==="true"&&k.toggleDropdown(s)});const t=document.querySelector('[aria-controls="primary-navigation"]');t.addEventListener("click",n=>{k.toggleDropdown(t)})}getTargetDropdownElement(e){const t=e.getAttribute("aria-controls");return document.getElementById(t)}}const k=new nn,Pe="#BorlabsCookie";class sn{register(){document.querySelectorAll(`${Pe} [${se}]`).forEach(n=>{this.handleBlurerEvent(n)});const t=n=>{!(n instanceof HTMLButtonElement)&&!(n instanceof HTMLInputElement)||this.handleBlurerEvent(n)};_(Pe,"click",`[${se}]`,t)}handleBlurerEvent(e){let t;e instanceof HTMLButtonElement?t=document.querySelector("#"+e.getAttribute(X)):t=e;const n=document.querySelector("#"+e.getAttribute(se));t instanceof HTMLInputElement&&n instanceof HTMLElement&&(t.type==="checkbox"&&!t.checked||t.type!=="checkbox"&&t.value==="1"?(n.querySelectorAll("input, select, textarea").forEach(s=>{s.getAttribute(oe)===null?s.disabled=!1:s.removeAttribute(oe)}),n.classList.remove("brlbs-cmpnt-blured")):(n.classList.add("brlbs-cmpnt-blured"),n.querySelectorAll("input, select, textarea").forEach(s=>{s.disabled&&s.setAttribute(oe,"1"),s.disabled=!0})))}}const on=new sn,rn="#BorlabsCookie";class an{register(){const e=function(t){const n=document.querySelector("#"+t.getAttribute(re));let s="";if(n instanceof HTMLInputElement||n instanceof HTMLTextAreaElement){const r=document.querySelector("#"+t.getAttribute(re)+" + .CodeMirror");r&&"CodeMirror"in r?s=r.CodeMirror.getValue():s=n.value,t.classList.add("bc-animate-copied")}else s=t.innerText;navigator.clipboard.writeText(s),window.setTimeout(()=>{t.classList.remove("bc-animate-copied")},1e3)};_(rn,"click",`[${re}]`,e)}}const ln=new an;function cn(o,e,t){const n=document.querySelector(o);n&&new MutationObserver(r=>{for(const l of r)if(l.type==="childList"){const a=Array.from(l.addedNodes).filter(c=>c instanceof HTMLElement);for(const c of a)c.matches(e)?t(c):Array.from(c.querySelectorAll(e)).forEach(m=>t(m))}}).observe(n,{childList:!0,subtree:!0})}const z="#BorlabsCookie";class dn{register(){jQuery(z+" .color-field").wpColorPicker();let e;jQuery(`${z} [${De}]`).on("click",function(n){n.preventDefault(),e&&e.off("select"),e=wp.media({title:this.getAttribute(gt),button:{text:this.getAttribute(Ct)},library:{type:["image"]},multiple:!1}),e.on("select",()=>{const s=e.state().get("selection").first().toJSON();jQuery("#"+this.getAttribute(xe)).html("<img src='"+s.url+`' alt="">`),jQuery("#"+this.getAttribute(De)).val(s.url)}),e.open()}),[{selector:"textarea[data-brlbs-editor-css]",initMethod:this.initializeCodeMirrorCssEditor},{selector:"textarea[data-brlbs-editor-html]",initMethod:this.initializeCodeMirrorHtmlEditor},{selector:"textarea[data-brlbs-editor-javascript]",initMethod:this.initializeCodeMirrorJavaScriptEditor}].forEach(n=>{document.querySelectorAll(`${z} ${n.selector}`).forEach(s=>{n.initMethod.call(this,s)}),cn(z,n.selector,s=>{n.initMethod.call(this,s)})})}initializeCodeMirrorCssEditor(e){wp.codeEditor.initialize(e.id,window.borlabsCookieGlobals.codeMirrorCss)}initializeCodeMirrorHtmlEditor(e){wp.codeEditor.initialize(e.id,window.borlabsCookieGlobals.codeMirrorHtml)}initializeCodeMirrorJavaScriptEditor(e){wp.codeEditor.initialize(e.id,window.borlabsCookieGlobals.codeMirrorJavaScript)}}const un=new dn,En={Log:$};window.BorlabsCookieAdmin=En;document.addEventListener("DOMContentLoaded",()=>{_t.register(),wt.register(),$t.register(),Ut.register(),Bt.register(),zt.register(),jt.register(),Jt.register(),ie.register(),en.register(),k.register(),on.register(),ln.register(),R.register(),un.register(),Dt.register()});
