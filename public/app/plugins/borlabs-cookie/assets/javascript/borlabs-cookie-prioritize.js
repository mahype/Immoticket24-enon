var l=Object.defineProperty;var g=(c,i,o)=>i in c?l(c,i,{enumerable:!0,configurable:!0,writable:!0,value:o}):c[i]=o;var a=(c,i,o)=>(g(c,typeof i!="symbol"?i+"":i,o),o);const f="borlabs-cookie";class u{constructor(){a(this,"_pluginCookie",{consents:{essential:[]},domainPath:"",expires:"",uid:"",version:0});a(this,"_config",null);a(this,"fragments",document.createDocumentFragment())}init(i){let o=!1;this._config=i;const t=document.createEvent("Event");t.initEvent("borlabs-cookie-prioritized-code-unblocked",!0,!0);const n=this.getPluginCookie();n.version===this._config.settings.cookieVersion&&(o=!0),this._config.settings.cookiesForBots&&/bot|googlebot|crawler|spider|robot|crawling|lighthouse/i.test(navigator.userAgent.toLowerCase())===!0&&(o=!0),o&&(Object.entries(n.consents).forEach(([e,r])=>{for(const s of r)this._config.serviceGroups[e]!==void 0&&Object.values(this._config.serviceGroups[e].serviceIds).indexOf(s)===-1||this._config.services[s].settings!==void 0&&this._config.services[s].settings.prioritize!==void 0&&this._config.services[s].settings.prioritize==="1"&&(this.createNodes(this.b64DecodeToUnicode(this._config.services[s].optInCode)),this._config.services[s].optInCode="")}),document.getElementsByTagName("head")[0].appendChild(this.fragments),document.dispatchEvent(t))}b64DecodeToUnicode(i){return decodeURIComponent(Array.prototype.map.call(window.atob(i),function(o){return"%"+("00"+o.charCodeAt(0).toString(16)).slice(-2)}).join(""))}createNodes(i){const o=i.split("<script");for(const t in o)if(o[t].indexOf("script>")!==-1){o[t]="<script"+o[t];const n=document.createElement("div"),e=document.createRange();e.selectNodeContents(n);const r=e.createContextualFragment(o[t]);n.appendChild(r),this.fragments.appendChild(n.firstElementChild)}}findCookies(i){const o=[];let t=[];return document.cookie.length&&(t=document.cookie.split(";"),t.forEach(function(n){try{n=decodeURIComponent(n);const e=n.split("="),r=e[0]!==void 0?e[0].trim():"",s=e[1]!==void 0?e[1].trim():"";i===r&&o.push({name:r,value:s})}catch(e){console.log(e)}})),o}getPluginCookie(){let i=[];i=this.findCookies(f);for(let o=0,t=i.length;o<t;++o){const n=i[o];try{const e=JSON.parse(n.value);e.domainPath!==void 0&&e.domainPath===this._config.settings.cookieDomain+this._config.settings.cookiePath&&(typeof e.version=="string"&&(e.version=parseInt(e.version)),this._pluginCookie={consents:e.consents,domainPath:e.domainPath,expires:e.expires,uid:e.uid,version:e.version})}catch(e){console.log(e)}}return this._pluginCookie}}const d=new u;window.BorlabsCookiePrioritizeHandle=d;d.init(window.borlabsCookieConfig);
